<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>16GnG Chat</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="auth-container">
        <div class="auth-box">
            <h1>16GnG</h1>
            <div id="login-form">
                <input type="text" id="login-username" placeholder="KullanÄ±cÄ± AdÄ±">
                <input type="password" id="login-password" placeholder="Åifre">
                <button onclick="login()">GiriÅŸ Yap</button>
                <p>HesabÄ±n yok mu? <a href="#" onclick="showRegister()">Kaydol</a></p>
            </div>
            <div id="register-form" style="display: none;">
                <input type="text" id="reg-username" placeholder="KullanÄ±cÄ± AdÄ±">
                <input type="password" id="reg-password" placeholder="Åifre">
                <button onclick="register()">Kaydol</button>
                <p>Zaten hesabÄ±n var mÄ±? <a href="#" onclick="showLogin()">GiriÅŸ Yap</a></p>
            </div>
        </div>
    </div>

    <div id="app-container" style="display: none;">
        <div class="sidebar">
            <div class="user-info">
                <span id="my-username">YÃ¼kleniyor...</span>
                <button onclick="logout()">Ã‡Ä±kÄ±ÅŸ Yap</button>
            </div>
            <div class="sidebar-tabs">
                <button id="tab-common" class="tab-btn active" onclick="showCommonChat()">Ortak Chat</button>
                <button id="tab-private" class="tab-btn" onclick="showPrivateList()">Ã–zel Mesajlar</button>
            </div>
            <div id="common-tab-content" class="tab-content">
                <div class="common-chat-preview" onclick="showCommonChatFull()">
                    <div class="preview-icon">ğŸŒ</div>
                    <div class="preview-text">
                        <strong>Ortak Chat OdasÄ±</strong>
                        <p>Herkesle konuÅŸmaya baÅŸla</p>
                    </div>
                </div>
            </div>
            <div id="private-tab-content" class="tab-content" style="display: none;">
                <h3>Sohbetler</h3>
                <ul id="user-list"></ul>
            </div>
        </div>

        <div class="chat-area">
            <!-- Common Chat Full Screen -->
            <div id="common-chat-full" class="chat-view" style="display: none;">
                <div class="chat-header">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <button class="back-btn" onclick="hideChatView()">â†</button>
                        <span>Ortak Chat</span>
                    </div>
                </div>
                <div id="common-messages" class="messages-container"></div>
                <div class="input-group">
                    <label for="common-image-input" class="icon-btn">ğŸ“·</label>
                    <input type="file" id="common-image-input" accept="image/*" style="display: none;" onchange="handleImage(event, false)">
                    <button id="common-record-btn" class="icon-btn" onclick="toggleRecord(false)">ğŸ¤</button>
                    <input type="text" id="common-input" placeholder="Mesaj yaz...">
                    <button class="send-btn" onclick="sendCommon()">GÃ¶nder</button>
                </div>
            </div>

            <!-- Private Chat View -->
            <div id="private-chat-view" class="chat-view" style="display: none;">
                <div class="chat-header">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <button class="back-btn" onclick="hideChatView()">â†</button>
                        <span id="private-header">KullanÄ±cÄ± SeÃ§in</span>
                    </div>
                    <div id="call-controls" style="display: none; display: flex; gap: 10px;">
                        <button id="private-search-btn" class="icon-btn" onclick="openSearch()">ğŸ”</button>
                        <button id="start-call-btn" class="icon-btn" onclick="startCall()" title="Sesli Ara">ğŸ“</button>
                    </div>
                </div>
                <div id="private-messages" class="messages-container"></div>
                <div class="input-group">
                    <label for="private-image-input" class="icon-btn">ğŸ“·</label>
                    <input type="file" id="private-image-input" accept="image/*" style="display: none;" onchange="handleImage(event, true)">
                    <button id="private-record-btn" class="icon-btn" onclick="toggleRecord(true)">ğŸ¤</button>
                    <input type="text" id="private-input" placeholder="Mesaj yaz...">
                    <button id="private-btn" class="send-btn" onclick="sendPrivate()">GÃ¶nder</button>
                </div>
            </div>

            <!-- Welcome Screen -->
            <div id="welcome-screen" class="chat-view" style="display: flex; justify-content: center; align-items: center; flex-direction: column; color: var(--text-secondary);">
                <div style="font-size: 64px; margin-bottom: 20px;">ğŸ’¬</div>
                <h2>16GnG Sohbet'e HoÅŸ Geldin</h2>
                <p>MesajlaÅŸmaya baÅŸlamak iÃ§in bir sohbet seÃ§in.</p>
            </div>
        </div>
    </div>

    <!-- Search Modal -->
    <div id="modal-overlay" onclick="closeSearch()"></div>
    <div id="search-modal">
        <h3 style="margin-bottom: 15px; color: #fff;">Ä°nternette Ara</h3>
        <div class="input-group" style="border: none; padding: 0;">
            <input type="text" id="search-query" placeholder="Ne aramak istersiniz?">
            <button id="voice-search-btn" class="icon-btn" onclick="startVoiceSearch()" style="font-size: 18px; margin-right: 5px;">ğŸ¤</button>
            <button class="send-btn" onclick="performSearch()">Ara</button>
        </div>
        <div id="search-results"></div>
    </div>

    <!-- Call UI -->
    <div id="call-overlay" class="modal-overlay" style="display: none; flex-direction: column; justify-content: center; align-items: center; background: rgba(0,0,0,0.9); z-index: 1000;">
        <div id="call-status" style="color: #fff; font-size: 24px; margin-bottom: 20px;">AranÄ±yor...</div>
        <div id="caller-name" style="color: #fff; font-size: 32px; font-weight: 700; margin-bottom: 40px;">KullanÄ±cÄ±</div>
        <div id="incoming-call-actions" style="display: none; gap: 40px;">
            <button onclick="acceptCall()" class="icon-btn" style="background: #4caf50; padding: 20px; border-radius: 50%; font-size: 32px;">ğŸ“</button>
            <button onclick="rejectCall()" class="icon-btn" style="background: #f44336; padding: 20px; border-radius: 50%; font-size: 32px;">ğŸ“µ</button>
        </div>
        <div id="ongoing-call-actions" style="display: none;">
            <button onclick="endCall()" class="icon-btn" style="background: #f44336; padding: 20px; border-radius: 50%; font-size: 32px;">ğŸ“µ</button>
        </div>
        <audio id="remote-audio" autoplay playsinline></audio>
        <audio id="ringtone" src="https://assets.mixkit.co/active_storage/sfx/1359/1359-preview.mp3" loop preload="auto"></audio>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>
